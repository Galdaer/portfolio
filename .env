# Intelluxe AI Configuration Template
# Copy this file to .env and update with your actual values

# === CORE APPLICATION ===
PROJECT_NAME=intelluxe-ai
ENVIRONMENT=development
DEVELOPMENT_MODE=true
DEBUG_ENABLED=false

# Server Configuration
HOST=0.0.0.0
PORT=3000
LOG_LEVEL=info

# === DATABASE CONFIGURATION ===
DATABASE_NAME=intelluxe
DATABASE_URL=postgresql://intelluxe:secure_password@172.20.0.13:5432/intelluxe
POSTGRES_PASSWORD=secure_password
REDIS_PASSWORD=

# === AI MODEL CONFIGURATION ===
# Ollama Configuration
OLLAMA_URL=http://172.20.0.10:11434
OLLAMA_MAX_LOADED_MODELS=3
OLLAMA_KEEP_ALIVE=24h

# MCP Configuration
MCP_SERVER_URL=http://172.20.0.18:3000

# === TRAINING CONFIGURATION (Phase 2+) ===
UNSLOTH_TRAINING_ENABLED=false
TRAINING_DATA_PATH=/app/data/training
ADAPTER_REGISTRY_PATH=/app/models/adapters
WANDB_PROJECT=intelluxe-training

# === PERFORMANCE CONFIGURATION ===
GPU_MEMORY_FRACTION=0.8

# === COMPLIANCE AND SECURITY ===
# Data Retention (7 years for healthcare)
DATA_RETENTION_DAYS=2555
AUDIT_LOG_LEVEL=detailed
PII_REDACTION_ENABLED=true
RBAC_ENABLED=true

# === HEALTHCARE AI SECURITY ===
# Encryption and Key Management
MCP_ENCRYPTION_KEY=your_fernet_key_here
MASTER_ENCRYPTION_KEY=your_master_key_here
JWT_SECRET_KEY=your_jwt_secret_here

# PHI Detection and Protection
PHI_DETECTION_ENABLED=true
PHI_DETECTION_CONFIDENCE_THRESHOLD=0.8
PRESIDIO_ENABLED=true

# HIPAA Compliance
HIPAA_COMPLIANCE_MODE=strict

# === RATE LIMITING & CONFIG DISCOVERY ===
# CONFIG_DISCOVERY_ROOT: root directory scanned recursively for *.yml (keep narrow to avoid performance cost). Default: config
CONFIG_DISCOVERY_ROOT=config
# RL_GLOBAL_SCALE: multiplier to scale all rpm/rph/burst values (e.g., 0.5 halves limits in testing)
RL_GLOBAL_SCALE=1.0
# RL_DISABLE: set to true to disable rate limiting (development only)
RL_DISABLE=false
# Optional explicit override of rate limits file (otherwise auto-discovered by filename 'rate_limits.yml')
# RL_YAML_PATH=/home/intelluxe/services/user/healthcare-api/config/rate_limits.yml
AUDIT_LOGGING_LEVEL=comprehensive
MINIMUM_NECESSARY_ENABLED=true

# === DEVELOPMENT ACCELERATION ===
# AI Assistant Configuration
AI_ASSISTANT_ENABLED=true
CLAUDE_API_KEY=your_claude_api_key_here
MEDICAL_TERMINOLOGY_CHECK=true
HEALTHCARE_CODE_PATTERNS=true

# DeepEval Testing
DEEPEVAL_ENABLED=true
DEEPEVAL_API_KEY=your_deepeval_api_key_here
SYNTHETIC_DATA_GENERATION=true

# Development Tools
PRE_COMMIT_ENABLED=true
CODE_QUALITY_CHECKS=true
SECURITY_SCANNING=true

# === CRITICAL SECURITY CONFIGURATION ===
# CRITICAL: Environment must be explicitly set (no defaults for security)
# Valid values: development, testing, staging, production
ENVIRONMENT=development

# === COPILOT FEEDBACK ENHANCEMENTS ===
# RBAC Configuration
RBAC_STRICT_MODE=true  # true or false (validated)
RBAC_DEFAULT_PATIENT_ACCESS=true  # Allow patient access in development
RBAC_PLACEHOLDER_WARNINGS=true  # Set to false to reduce development log noise

# Performance Tuning
PHI_DETECTION_CACHE_TTL=300
PARALLEL_VALIDATION=false

# PHI Detection
PHI_CACHE_VERSION=v1.0  # Increment when PHI detection rules change

# === BATCH 2 SECURITY ENHANCEMENTS ===
# Error Message Configuration
GENERIC_ERROR_MESSAGES=true      # Use generic error messages in production

# Performance Configuration
PHI_BATCH_SIZE=500              # Batch size for PHI processing
LARGE_TEXT_THRESHOLD=10000      # Threshold for batched processing

# === COPILOT CODE QUALITY IMPROVEMENTS ===
# RBAC Feature Flags
RBAC_ENABLE_PATIENT_ASSIGNMENT=false  # Enable patient assignment in production (gradual rollout)

# === SECURITY CONFIGURATION ===
# JWT Authentication (required for production)
JWT_SECRET=your_jwt_secret_here_minimum_32_chars

# Master Encryption Key (required for production)
# Must be 32+ bytes, base64-encoded, high entropy
# Generate with: python scripts/generate-secure-key.py
MASTER_ENCRYPTION_KEY=your_base64_encoded_32_byte_key_here

# Database Configuration with Security
POSTGRES_CONNECTION_STRING=postgresql://user:pass@172.20.0.13:5432/intelluxe?sslmode=require

# === HEALTH MONITORING ===
HEALTH_CHECK_INTERVAL=60s
HEALTH_ALERT_WEBHOOK=
HEALTH_PAGE_PUBLIC=false

# === HEALTHCARE MCP API CREDENTIALS ===
# Practice-level API keys (shared across all doctors/staff in practice)
# Each practice/clinic gets their own set of these keys

# FHIR/EHR Integration (using free test server for development)
FHIR_BASE_URL=https://hapi.fhir.org/baseR4
OAUTH_CLIENT_ID=healthcare-mcp-dev
OAUTH_CLIENT_SECRET=dev-secret
OAUTH_TOKEN_HOST=https://auth.example.com
OAUTH_TOKEN_PATH=/oauth/token
OAUTH_AUTHORIZE_PATH=/oauth/authorize
OAUTH_AUTHORIZATION_METHOD=body
OAUTH_AUDIENCE=healthcare-api
OAUTH_CALLBACK_URL=http://localhost:3000/callback
OAUTH_SCOPES=read:healthcare write:healthcare
OAUTH_CALLBACK_PORT=3000

# Medical Research APIs (configured for FREE access)
PUBMED_API_KEY=optional_for_higher_rate_limits
TRIALS_API_KEY=
FDA_API_KEY=

# Insurance APIs (using developer test credentials)
ANTHEM_API_KEY=test_api_key_availity
ANTHEM_API_SECRET=test_api_secret_availity
UHC_API_USER=test_user_optum
UHC_API_PASS=test_pass_optum
CIGNA_CLIENT_ID=test_client_id_cigna
CIGNA_CLIENT_SECRET=test_client_secret_cigna

# Healthcare MCP Server Configuration
MCP_SECURITY_MODE=healthcare
PHI_DETECTION_ENABLED=true
AUDIT_LOGGING_LEVEL=comprehensive
HIPAA_COMPLIANCE_MODE=strict
MCP_SERVER_PORT=3000

# === AUTHENTICATION STRATEGY ===
# Authentication mode for clinic integration
AUTH_MODE=standalone  # standalone, active_directory, ldap, saml_sso, oauth2

# User-specific encrypted environment files
USER_ENV_FILES=true  # Enable per-user encrypted .env files
USER_CONFIG_DIR=/home/{username}/.intelluxe/
USER_ENV_ENCRYPTION=true

# Existing system integration (if AUTH_MODE != standalone)
EXISTING_AUTH_ENDPOINT=
EXISTING_AUTH_DOMAIN=  # For Active Directory
EXISTING_LDAP_SERVER=  # For LDAP
EXISTING_SAML_METADATA_URL=  # For SAML SSO

# Fallback authentication (always available)
STANDALONE_AUTH_ENABLED=true  # Allow fallback to standalone auth
EMERGENCY_ACCESS_ENABLED=true  # Emergency access during auth system outages
ENVIRONMENT=development
