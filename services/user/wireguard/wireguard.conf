# WireGuard VPN server
image=linuxserver/wireguard:latest
port=51820:51820/udp
description=Secure VPN server with per-client QR config
volumes=${WG_DIR}:/config
env=PUID=${CFG_UID};PGID=${CFG_GID};SERVERURL=${WG_ENDPOINT:-auto};SERVERPORT=51820;PEERS=0;PEERDNS=${WG_CLIENT_DNS:-auto};INTERNAL_SUBNET=${VPN_SUBNET:-10.8.0.0/24}
cap_add=NET_ADMIN,SYS_MODULE
sysctls=net.ipv4.conf.all.src_valid_mark=1
static_ip=172.20.0.2
requires_setup=wireguard_keys
post_start_hook=regenerate_wg_server_config
healthcheck=test -f /config/wg_confs/wg0.conf && wg show wg0 | grep -q "interface: wg0" || exit 1post_start_hook=regenerate_wg_server_config