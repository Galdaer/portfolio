# Healthcare API Service - Core Healthcare AI System with Integrated MCP Server
# Main FastAPI application providing healthcare agents and MCP integration
# Now includes Node.js MCP server for subprocess spawning
image=intelluxe/healthcare-api:latest
port=8000:8000
description=Core Healthcare AI API with integrated MCP server for reliable stdio communication
env_file=.env
env=ENVIRONMENT=development,LOG_LEVEL=info,DEVELOPMENT_MODE=true,DEBUG_ENABLED=false,POSTGRES_HOST=postgresql,REDIS_HOST=redis,MCP_SERVER_PATH=/app/mcp-server/build/index.js,MCP_SERVER_INCLUDED=true
volumes=/home/intelluxe/logs:/app/logs,healthcare-api-data:/app/data,/var/run/docker.sock:/var/run/docker.sock
command=python main.py --http
network_mode=intelluxe-net
static_ip=172.20.0.4
depends_on=postgresql,redis,insurance-verification,billing-engine,compliance-monitor,business-intelligence,doctor-personalization
health_cmd=python -c "import sys; sys.exit(0)" 
health_interval=30s
health_timeout=10s
health_retries=3
health_start_period=60s
health_start_interval=5s
log_opt=max-size=10m
log_opt=max-file=3
restart_policy=unless-stopped
read_only=false
security_opt=no-new-privileges
user=1000:984
working_dir=/app
