# Traefik reverse proxy with automatic SSL and domain routing
image=traefik:latest
port=8080
description=Reverse proxy with automatic SSL and domain routing
additional_ports=80,443
volumes=${CFG_ROOT}/traefik-config:/etc/traefik,${CFG_ROOT}/traefik-data:/data,/var/run/docker.sock:/var/run/docker.sock:ro
env=TRAEFIK_DOMAIN_MODE=${TRAEFIK_DOMAIN_MODE:-local},TRAEFIK_DOMAIN_NAME=${TRAEFIK_DOMAIN_NAME:-},TRAEFIK_ACME_EMAIL=${TRAEFIK_ACME_EMAIL:-}
cap_add=NET_BIND_SERVICE
healthcheck=wget --quiet --tries=3 --timeout=5 --spider http://localhost:8080/api/rawdata || exit 1
static_ip=172.20.0.8
labels=traefik.http.middlewares.lan-vpn-only.ipwhitelist.sourcerange=${LAN_SUBNET:-192.168.0.0/16},${VPN_SUBNET:-10.8.0.0/24},127.0.0.1/32
