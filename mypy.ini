[mypy]
# Healthcare AI system configuration - Production Ready
python_version = 3.11

# STRICT HEALTHCARE TYPE SAFETY - No type suppression allowed
warn_return_any = True
no_implicit_optional = True  
warn_redundant_casts = True
warn_unreachable = True
strict_equality = True
disallow_untyped_defs = True
disallow_incomplete_defs = True
check_untyped_defs = True
disallow_untyped_decorators = True
warn_no_return = True

# HEALTHCARE SAFETY: Discourage type suppression
warn_unused_ignores = True
strict_optional = True

# MEDICAL-MIRRORS SPECIFIC: Strict checking for healthcare data downloaders
disallow_any_unimported = True
disallow_any_expr = False  # Allow some Any for external API responses
disallow_any_decorated = True
disallow_any_explicit = True
disallow_subclassing_any = True

# Financial calculation safety (from PR #31 lessons)
# Enable strict numeric type checking for Decimal vs float issues
warn_incomplete_stub = True
warn_redundant_casts = True

# Reduce noise from external libraries ONLY
ignore_missing_imports = True
warn_unused_configs = False

# Disable import-untyped warnings for external libraries without stubs
# This is acceptable for healthcare production since we validate our own types strictly
disable_error_code = import-untyped

# Exclude certain paths
exclude = ^(archive/.*|reference/.*|actions-runners/.*|services/user/whisperlive/.*|test/python/test_config_web_ui\.py|test/.*|tests/.*|\..*)

# All modules get strict typing for healthcare safety
# Agent routers use FastAPI decorators which mypy flags as untyped - these are safe
[mypy-agents.*.router]
disallow_untyped_decorators = False

# Main FastAPI application uses FastAPI decorators which mypy flags as untyped - these are safe
[mypy-main]
disallow_untyped_decorators = False

# Medical-mirrors modules require extra strict checking (based on PR #31 feedback)
[mypy-services.user.medical-mirrors.*]
disallow_untyped_defs = True
disallow_incomplete_defs = True
disallow_untyped_decorators = True
warn_return_any = True
strict_optional = True
# Extra strict for medical data processing
disallow_any_decorated = True
warn_redundant_casts = True

# Insurance calculation modules need strict Decimal checking
[mypy-domains.insurance_calculations]
disallow_untyped_defs = True
warn_return_any = True
strict_optional = True
disallow_any_explicit = True
